<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Manuchehr & ùíÆùíΩùìäùìÄùìá‚Ñ¥ùìÉùí∂ ‚Äî –ù–∞—à —Å–∞–π—Ç</title>
  <style>
    /* ========== Reset & fonts ========== */
    @import url('https://fonts.googleapis.com/css2?family=Great+Vibes&family=Inter:wght@300;400;600&display=swap');
    *{box-sizing:border-box} body,html{height:100%;margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,"Helvetica Neue",Arial}

    /* ========== Layout ========== */
    body{background:linear-gradient(135deg,#ffd7e6 0%, #fbe8ff 40%, #fff6e6 100%);color:#222;overflow:hidden}
    .app{position:relative;min-height:100vh;display:flex;flex-direction:column}
    header{display:flex;align-items:center;justify-content:space-between;padding:18px 24px;backdrop-filter:blur(6px);}
    .brand{display:flex;align-items:center;gap:14px}
    .logo{width:56px;height:56px;border-radius:999px;background:rgba(255,255,255,0.4);display:flex;align-items:center;justify-content:center;box-shadow:0 6px 18px rgba(0,0,0,0.08)}
    .logo .initials{font-family:'Great Vibes',cursive;font-size:22px;color:#a42b6a}
    .title{line-height:1}
    .title .names{font-family:'Great Vibes',cursive;font-size:20px;color:#9b2d69}
    .title .sub{font-size:12px;color:#6b4655;margin-top:2px}

    /* ========== Tabs ========== */
    nav.tabs{display:flex;gap:10px}
    .tab{padding:8px 14px;border-radius:999px;background:rgba(255,255,255,0.5);cursor:pointer;font-weight:600}
    .tab.active{background:linear-gradient(90deg,rgba(255,255,255,0.9),rgba(255,255,255,0.7));box-shadow:0 4px 18px rgba(154,40,100,0.12)}

    /* ========== Main container ========== */
    main{flex:1;position:relative;padding:28px;display:grid;grid-template-columns:1fr 380px;gap:22px;align-items:start}
    .card{background:rgba(255,255,255,0.75);border-radius:18px;padding:20px;box-shadow:0 8px 30px rgba(153,52,93,0.07)}

    /* ========== Hero / Countdown ========== */
    .hero{display:flex;flex-direction:column;gap:12px;align-items:flex-start}
    .hero h1{font-family:'Great Vibes',cursive;font-size:44px;margin:0;color:#7a2b57}
    .hero p{margin:0;color:#5c3b45}
    .countdown{display:flex;gap:12px;margin-top:6px}
    .countdown .unit{min-width:86px;padding:12px;border-radius:12px;background:rgba(255,255,255,0.9);text-align:center}
    .countdown .num{font-size:26px;font-weight:700;color:#6b2650}
    .countdown .lbl{font-size:12px;color:#8a6a77}

    /* ========== Sidebar small info ========== */
    .sidebar{position:sticky;top:24px}
    .photo-placeholder{width:100%;height:220px;border-radius:12px;background:linear-gradient(180deg,#fff4f8,#fffbf2);display:flex;align-items:center;justify-content:center;color:#b87b9b}
    .note{margin-top:12px;color:#6b4655;font-size:14px}

    /* ========== Calendar grid ========== */
    .grid{display:grid;grid-template-columns:repeat(5,1fr);gap:10px}
    .day{padding:18px;border-radius:10px;background:linear-gradient(180deg,rgba(255,255,255,0.95),rgba(255,255,255,0.85));cursor:pointer;text-align:center}
    .day .num{font-weight:700;color:#6b2650}
    .day .dot{margin-top:8px;height:6px;width:6px;border-radius:999px;background:#eaa6c9;margin-left:auto;margin-right:auto}

    /* ========== Dreams & Likes ========== */
    .dreams-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
    .dream{padding:12px;border-radius:12px;background:rgba(255,255,255,0.9)}

    /* ========== Modal ========== */
    .modal-backdrop{position:fixed;inset:0;background:rgba(12,6,10,0.45);display:flex;align-items:center;justify-content:center;z-index:60}
    .modal{width:min(720px,96%);background:white;border-radius:14px;padding:18px}
    .modal h3{margin:0 0 8px 0}
    .form-row{display:flex;gap:8px;margin-top:10px}
    textarea{width:100%;height:110px;border-radius:8px;padding:10px;border:1px solid #eee}
    input[type=text]{padding:8px;border-radius:8px;border:1px solid #eee;width:100%}
    .btn{padding:8px 12px;border-radius:10px;background:linear-gradient(90deg,#f9d6e8,#ffd6e2);cursor:pointer;border:none;font-weight:600}

    /* ========== Footer controls ========== */
    footer{padding:14px 24px;color:#7a3650;text-align:center;font-size:13px}

    /* ========== Hearts Canvas ========== */
    #hearts{position:fixed;inset:0;pointer-events:none;z-index:1}
    .content-layer{position:relative;z-index:10}

    /* ========== Responsive ========== */
    @media (max-width:900px){main{grid-template-columns:1fr;}.sidebar{order:2}.hero h1{font-size:34px}.countdown .unit{min-width:60px}}
  </style>
</head>
<body>
  <canvas id="hearts"></canvas>
  <div class="app content-layer">
    <header>
      <div class="brand">
        <div class="logo"><div class="initials">M&S</div></div>
        <div class="title">
          <div class="names">Manuchehr &amp; ùíÆùíΩùìäùì¥ùìá‚Ñ¥ùìÉùí∂ <span style="font-size:12px;color:#a36a86">(Shuki)</span></div>
          <div class="sub">–î–ª—è —Ç–µ–±—è ‚Äî –Ω–µ–±–æ–ª—å—à–æ–π –º–∏—Ä —Ç–µ–ø–ª–∞ –∏ –º—ã—Å–ª–µ–π</div>
        </div>
      </div>
      <nav class="tabs">
        <div class="tab active" data-tab="home">–ì–ª–∞–≤–Ω–∞—è</div>
        <div class="tab" data-tab="thoughts">–ú–æ–∏ –º—ã—Å–ª–∏</div>
        <div class="tab" data-tab="dreams">–ù–∞—à–∏ –º–µ—á—Ç—ã</div>
        <div class="tab" data-tab="likes">–ù–∞—à–∏ –æ–¥–∏–Ω–∞–∫–æ–≤–æ—Å—Ç–∏</div>
      </nav>
    </header>

    <main>
      <section class="card hero" id="home-card">
        <h1>–ú—ã —Å–∫–æ—Ä–æ –±—É–¥–µ–º –≤–º–µ—Å—Ç–µ</h1>
        <p>–ö–∞–∂–¥—ã–π –¥–µ–Ω—å ‚Äî —Å–ø–∏—Å–æ–∫ –º–∞–ª–µ–Ω—å–∫–∏—Ö –º—ã—Å–ª–µ–π –∏ –±–æ–ª—å—à–∏—Ö –ø–ª–∞–Ω–æ–≤. –°—á—ë—Ç—á–∏–∫ –¥–æ –Ω–∞—à–µ–π —Å–≤–∞–¥—å–±—ã:</p>
        <div class="countdown" aria-hidden="false">
          <div class="unit"><div class="num" id="days">--</div><div class="lbl">–î–Ω–µ–π</div></div>
          <div class="unit"><div class="num" id="hours">--</div><div class="lbl">–ß–∞—Å–æ–≤</div></div>
          <div class="unit"><div class="num" id="minutes">--</div><div class="lbl">–ú–∏–Ω—É—Ç</div></div>
          <div class="unit"><div class="num" id="seconds">--</div><div class="lbl">–°–µ–∫—É–Ω–¥</div></div>
        </div>

        <div style="margin-top:18px">
          <button class="btn" id="open-thoughts">–û—Ç–∫—Ä—ã—Ç—å "–ú–æ–∏ –º—ã—Å–ª–∏"</button>
        </div>
      </section>

      <aside class="sidebar">
        <div class="card photo-placeholder">–í–∞—à–µ–π –æ–±—â–µ–π —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –µ—â—ë –Ω–µ—Ç ‚Äî –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–∑–∂–µ</div>
        <div class="card note">–°–æ–≤–µ—Ç: –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∞–π—Ç–∞ –Ω–∞ GitHub Pages –º–æ–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–Ω–µ–≤–Ω–∏–∫ –ø—Ä—è–º–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ ‚Äî –≤—Å–µ –∑–∞–ø–∏—Å–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ (LocalStorage).</div>
      </aside>

      <!-- Thoughts (calendar) -->
      <section class="card" id="thoughts-card" style="display:none">
        <h2>–ú–æ–∏ –º—ã—Å–ª–∏ ‚Äî 30 –¥–Ω–µ–π</h2>
        <p>–ö–ª–∏–∫–Ω–∏ –Ω–∞ –Ω–æ–º–µ—Ä –¥–Ω—è, —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –∏–ª–∏ –ø—Ä–æ—á–∏—Ç–∞—Ç—å –∑–∞–ø–∏—Å—å.</p>
        <div class="grid" id="calendar"></div>
      </section>

      <!-- Dreams -->
      <section class="card" id="dreams-card" style="display:none">
        <h2>–ù–∞—à–∏ –º–µ—á—Ç—ã</h2>
        <div class="dreams-grid" id="dreams-list">
          <div class="dream"><strong>–ü—É—Ç–µ—à–µ—Å—Ç–≤–æ–≤–∞—Ç—å –≤–º–µ—Å—Ç–µ</strong><div>–ò—Ç–∞–ª–∏—è, –Ø–ø–æ–Ω–∏—è, —Ç–∞ —Å–∞–º–∞—è –º–∞–ª–µ–Ω—å–∫–∞—è –∫–æ—Ñ–µ–π–Ω—è —É –º–æ—Ä—è.</div></div>
          <div class="dream"><strong>–°–≤–æ–π –¥–æ–º</strong><div>–¢—ë–ø–ª—ã–π –¥–æ–º —Å –±–æ–ª—å—à–∏–º –æ–∫–Ω–æ–º –∏ —Ä–∞—Å—Ç–µ–Ω–∏—è–º–∏.</div></div>
          <div class="dream"><strong>–°–µ–º–µ–π–Ω—ã–µ —Ç—Ä–∞–¥–∏—Ü–∏–∏</strong><div>–í–µ—á–µ—Ä–Ω–∏–µ –ø—Ä–æ–≥—É–ª–∫–∏ –∏ –∑–∞–≤—Ç—Ä–∞–∫–∏ –ø–æ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å—è–º.</div></div>
          <div class="dream"><strong>–•–æ–±–±–∏ –≤–¥–≤–æ—ë–º</strong><div>–ö—É–ª–∏–Ω–∞—Ä–∏—è, –ø–æ—Ö–æ–¥—ã, –ø–æ–¥–±–æ—Ä –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤.</div></div>
        </div>
      </section>

      <!-- Likes -->
      <section class="card" id="likes-card" style="display:none">
        <h2>–ù–∞—à–∏ –æ–¥–∏–Ω–∞–∫–æ–≤–æ—Å—Ç–∏</h2>
        <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:12px">
          <div class="dream">‚òï –ö–æ—Ñ–µ –ø–æ —É—Ç—Ä–∞–º</div>
          <div class="dream">üé¨ –õ—é–±–∏–º—ã–µ —Ñ–∏–ª—å–º—ã</div>
          <div class="dream">üåä –ú–æ—Ä–µ –∏ –¥–ª–∏–Ω–Ω—ã–µ –ø—Ä–æ–≥—É–ª–∫–∏</div>
          <div class="dream">üé∂ –ú—É–∑—ã–∫–∞ –≤–µ—á–µ—Ä–æ–º</div>
        </div>
      </section>

    </main>

    <footer>–°–¥–µ–ª–∞–Ω–æ —Å –ª—é–±–æ–≤—å—é ‚Äî Manuchehr ‚ù§Ô∏è ùíÆùíΩùìäùì¥ùìá‚Ñ¥ùìÉùí∂</footer>
  </div>

  <!-- Modal (hidden) -->
  <div id="modal-root" style="display:none"></div>

  <script>
    /* ================== Hearts animation ================== */
    (function(){
      const canvas = document.getElementById('hearts');
      const ctx = canvas.getContext('2d');
      let w = canvas.width = innerWidth;
      let h = canvas.height = innerHeight;
      window.addEventListener('resize',()=>{w=canvas.width=innerWidth;h=canvas.height=innerHeight});

      function rand(min,max){return Math.random()*(max-min)+min}

      const particles = [];
      function createHeart(){
        const size = rand(10,30);
        particles.push({x:rand(0,w),y:h+50,vx:rand(-0.3,0.3),vy:rand(-1.4,-0.6),size,alpha:rand(0.4,0.95),rot:rand(0,Math.PI*2)});
      }
      for(let i=0;i<35;i++) createHeart();
      function drawHeart(x,y,s,alpha,rot){
        ctx.save();ctx.translate(x,y);ctx.rotate(rot);
        ctx.scale(s/40,s/40);
        ctx.beginPath();
        ctx.moveTo(0,-8);
        ctx.bezierCurveTo(20,-40,60,-40,60,-8);
        ctx.bezierCurveTo(60,30,30,50,0,70);
        ctx.bezierCurveTo(-30,50,-60,30,-60,-8);
        ctx.bezierCurveTo(-60,-40,-20,-40,0,-8);
        ctx.closePath();
        ctx.fillStyle = 'rgba(171,68,118,'+alpha+')';
        ctx.fill();
        ctx.restore();
      }
      function loop(){
        ctx.clearRect(0,0,w,h);
        for(let i=0;i<particles.length;i++){
          const p=particles[i];
          p.x+=p.vx; p.y+=p.vy; p.rot+=0.01;
          drawHeart(p.x,p.y,p.size,p.alpha,p.rot);
          if(p.y<-80||p.x<-100||p.x>w+100){particles.splice(i,1);i--;createHeart();}
        }
        requestAnimationFrame(loop);
      }
      loop();
    })();

    /* ================== Tabs and SPA ================== */
    const tabs = document.querySelectorAll('.tab');
    const sections = {home:document.getElementById('home-card'), thoughts:document.getElementById('thoughts-card'), dreams:document.getElementById('dreams-card'), likes:document.getElementById('likes-card')};
    function activate(tabName){
      tabs.forEach(t=>t.classList.toggle('active', t.dataset.tab===tabName));
      Object.keys(sections).forEach(k=>sections[k].style.display = (k===tabName)?'block':'none');
      // soften hearts on non-home
      document.getElementById('hearts').style.opacity = (tabName==='home')?1:0.45;
    }
    tabs.forEach(t=>t.addEventListener('click',()=>activate(t.dataset.tab)));
    document.getElementById('open-thoughts').addEventListener('click',()=>activate('thoughts'));

    /* ================== Countdown ================== */
    const target = new Date('2026-04-05T00:00:00');
    function updateCountdown(){
      const now = new Date();
      let diff = Math.max(0, Math.floor((target - now) / 1000));
      const days = Math.floor(diff / 86400); diff %= 86400;
      const hours = Math.floor(diff / 3600); diff %= 3600;
      const mins = Math.floor(diff / 60); const secs = diff % 60;
      document.getElementById('days').textContent = days;
      document.getElementById('hours').textContent = String(hours).padStart(2,'0');
      document.getElementById('minutes').textContent = String(mins).padStart(2,'0');
      document.getElementById('seconds').textContent = String(secs).padStart(2,'0');
    }
    updateCountdown(); setInterval(updateCountdown,1000);

    /* ================== Calendar / Thoughts (LocalStorage) ================== */
    const calendarEl = document.getElementById('calendar');
    const DAYS = 30;
    const STORAGE_KEY = 'shuki_thoughts_v1';
    let data = JSON.parse(localStorage.getItem(STORAGE_KEY) || '{}');

    function renderCalendar(){
      calendarEl.innerHTML = '';
      for(let i=1;i<=DAYS;i++){
        const div = document.createElement('div'); div.className='day'; div.dataset.day=i;
        div.innerHTML = `<div class="num">–î–µ–Ω—å ${i}</div><div class="dot"></div>`;
        if(data[i] && (data[i].text||data[i].image||data[i].video||data[i].music)) div.style.boxShadow='0 6px 18px rgba(154,40,100,0.06)';
        div.addEventListener('click',()=>openModalForDay(i));
        calendarEl.appendChild(div);
      }
    }

    function openModalForDay(day){
      const cur = data[day] || {text:'',image:'',video:'',music:''};
      const root = document.getElementById('modal-root'); root.style.display='block';
      root.innerHTML = `
        <div class="modal-backdrop">
          <div class="modal card">
            <h3>–î–µ–Ω—å ${day}</h3>
            <label>–¢–µ–∫—Å—Ç</label>
            <textarea id="m_text">${escapeHtml(cur.text||'')}</textarea>
            <div class="form-row">
              <input id="m_image" type="text" placeholder="–°—Å—ã–ª–∫–∞ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)" value="${escapeHtml(cur.image||'')}">
              <input id="m_video" type="text" placeholder="–°—Å—ã–ª–∫–∞ –Ω–∞ –≤–∏–¥–µ–æ (YouTube)" value="${escapeHtml(cur.video||'')}">
            </div>
            <div class="form-row" style="margin-top:8px;">
              <input id="m_music" type="text" placeholder="–°—Å—ã–ª–∫–∞ –Ω–∞ –∞—É–¥–∏–æ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)" value="${escapeHtml(cur.music||'')}">
            </div>
            <div style="display:flex;gap:8px;margin-top:12px;justify-content:flex-end">
              <button class="btn" id="saveBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
              <button class="btn" id="closeBtn">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
          </div>
        </div>
      `;
      document.getElementById('closeBtn').addEventListener('click',()=>{root.style.display='none';root.innerHTML='';});
      document.getElementById('saveBtn').addEventListener('click',()=>{
        const t = document.getElementById('m_text').value;
        const img = document.getElementById('m_image').value;
        const vid = document.getElementById('m_video').value;
        const mus = document.getElementById('m_music').value;
        data[day] = {text:t,image:img,video:vid,music:mus};
        localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
        root.style.display='none';root.innerHTML='';renderCalendar();
      });
    }

    function escapeHtml(str){return String(str).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');}
    renderCalendar();

    /* ================== Optional: quick import/export of diary ================== */
    // For convenience: allow export/import via console commands if needed
    window.exportDiary = ()=>{ return JSON.stringify(data) };
    window.importDiary = (json)=>{ try{ data = JSON.parse(json); localStorage.setItem(STORAGE_KEY,JSON.stringify(data)); renderCalendar(); alert('–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ') }catch(e){alert('–û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞')} };

    /* ================== Small polish ================== */
    // If user refreshes, remain on last opened tab
    const LAST_TAB = 'shuki_last_tab_v1';
    const last = localStorage.getItem(LAST_TAB) || 'home';
    activate(last);
    tabs.forEach(t=>t.addEventListener('click',()=>localStorage.setItem(LAST_TAB,t.dataset.tab)));

    // Small accessibility: escape to close modal
    window.addEventListener('keydown',e=>{if(e.key==='Escape'){const root=document.getElementById('modal-root');if(root.style.display==='block'){root.style.display='none';root.innerHTML='';}}});
  </script>
</body>
</html>