<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Manuchehr & ùíÆùíΩùìäùìÄùìá‚Ñ¥ùìÉùí∂ ‚Äî –ù–∞—à —Å–∞–π—Ç</title>
  <style>
    /* Fonts & reset */
    @import url('https://fonts.googleapis.com/css2?family=Great+Vibes&family=Inter:wght@300;400;600&display=swap');
    *{box-sizing:border-box} 
    html,body{height:100%;margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial;
      background:linear-gradient(135deg,#ffd7e6 0%, #fbe8ff 40%, #fff6e6 100%);
      color:#222;
    }

    /* Header */
    header{
      display:flex;align-items:center;justify-content:space-between;
      padding:14px 18px;position:sticky;top:0;
      background:rgba(255,255,255,0.55);backdrop-filter:blur(6px);
      z-index:40
    }
    .brand{display:flex;gap:12px;align-items:center}
    .logo{width:52px;height:52px;border-radius:50%;
      display:flex;align-items:center;justify-content:center;
      font-family:'Great Vibes';font-size:22px;color:#a93778;
      background:rgba(255,255,255,0.8);box-shadow:0 6px 18px rgba(0,0,0,0.08)}
    .title .names{font-family:'Great Vibes';font-size:18px;color:#8c2f62}
    .title .sub{font-size:12px;color:#6b4a54}

    /* Tabs */
    nav.tabs{display:flex;gap:8px}
    .tab{padding:8px 12px;border-radius:999px;background:rgba(255,255,255,0.6);
      cursor:pointer;font-weight:600;transition:transform .15s,background .2s}
    .tab:active{transform:scale(.98)}
    .tab.active{
      background:linear-gradient(90deg,#ffffff,#fff0f6);
      color:#8c2f62;box-shadow:0 6px 20px rgba(139,45,86,0.08)
    }

    /* Burger for mobile */
    #menuBtn{display:none;font-size:26px;color:#8c2f62;cursor:pointer}
    @media(max-width:760px){
      #menuBtn{display:block}
      nav.tabs{
        display:none;position:absolute;top:64px;right:12px;background:rgba(255,255,255,0.95);
        flex-direction:column;padding:10px;border-radius:12px;
        box-shadow:0 10px 30px rgba(0,0,0,0.12);max-width:85vw
      }
      nav.tabs.show{display:flex}
    }

    /* Layout */
    main{
      display:grid;grid-template-columns:1fr 350px;gap:18px;padding:20px;
      align-items:start;min-height:calc(100vh - 110px)
    }
    @media(max-width:900px){main{grid-template-columns:1fr;padding:14px}}
    .card{
      background:rgba(255,255,255,0.8);padding:18px;border-radius:14px;
      box-shadow:0 8px 30px rgba(0,0,0,0.06)
    }

    /* Hero */
    h1{font-family:'Great Vibes';font-size:44px;margin:0;color:#7a2b57}
    p.lead{margin:8px 0;color:#5c3b45}

    /* Countdown */
    .countdown{display:flex;gap:12px;flex-wrap:wrap;margin-top:12px}
    .unit{min-width:78px;background:white;border-radius:12px;padding:10px;text-align:center}
    .unit .num{font-size:22px;font-weight:800;color:#6b2650}
    .unit .lbl{font-size:12px;color:#8a6a77}

    /* Calendar */
    .grid{display:grid;grid-template-columns:repeat(5,1fr);gap:10px}
    @media(max-width:600px){.grid{grid-template-columns:repeat(3,1fr)}}
    /* –ë–ª–æ–∫ –¥–Ω—è ‚Äî –∫—Ä—É–ø–Ω–µ–µ –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–π —ç—Å—Ç–µ—Ç–∏–∫–∏ */
    .day {
      padding: 18px;
      border-radius: 14px;
      background: white;
      text-align: center;
      position: relative;
      transition: transform 0.12s ease, box-shadow 0.20s ease;
      box-shadow: 0 4px 12px rgba(0,0,0,0.06);
      font-size: 15px;
    }

    /* –ê–Ω–∏–º–∞—Ü–∏—è –ø—Ä–∏ —Ç–∞–ø–µ */
    .day:active {
      transform: scale(1.06);
      box-shadow: 0 6px 18px rgba(139,45,86,0.15);
    }

    /* –ù–æ–º–µ—Ä –¥–Ω—è –∂–∏—Ä–Ω—ã–π */
    .day .num {
      font-weight: 700;
      color: #6b2650;
    }

    /* –ó–∞–∫—Ä—ã—Ç—ã–µ –¥–Ω–∏ */
    .day.locked {
      background: #f7f0f4;
      opacity: 0.55;
      filter: grayscale(0.6);
    }

    /* –Ø—Ä–∫–∏–π –∑–∞–º–æ—á–µ–∫ ‚Äî –≤–∏–¥–Ω–æ —Å—Ä–∞–∑—É! */
    .day.locked::after{
  content:"üîí";
  position:absolute;
  bottom:6px;      /* –±–∞–Ω—Ç–∏–∫ –≤–Ω–∏–∑—É */
  left:50%;
  transform:translateX(-50%);
  font-size:20px;
  opacity:0.9;
}


    /* –û—Ç–∫—Ä—ã—Ç—ã–µ –¥–Ω–∏ ‚Äî –Ω–µ–∂–Ω–∞—è —Ä–∞–º–∫–∞ */
    .day:not(.locked) {
      border: 2px solid #ffd6e7;
    }

    /* –ó–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–Ω–∏ ‚Äî —Å–µ—Ä–¥–µ—á–∫–æ */
    .day.filled::after {
     
      position: absolute;
      bottom: 6px;
      right: 8px;
      font-size: 17px;
      opacity: 0.85;
    }


    /* Modal */
    .modal-backdrop{
      position:fixed;inset:0;background:rgba(0,0,0,0.45);
      display:flex;align-items:center;justify-content:center;
      z-index:90;
    }
    .modal{
      width:min(780px,96%);
      background:white;border-radius:12px;padding:16px;
    }
    textarea,input{
      width:100%;padding:10px;border-radius:8px;
      border:1px solid #e8dfe6;margin-top:8px
    }
    .modal .actions{
      display:flex;gap:8px;justify-content:flex-end;margin-top:10px
    }

    /* Fade transition */
    .fade{opacity:0;transition:opacity .35s ease,transform .35s ease;transform:translateY(6px)}
    .fade.show{opacity:1;transform:none}

    /* Hearts canvas */
    #hearts{position:fixed;inset:0;pointer-events:none;z-index:5}

    footer{padding:14px;text-align:center;color:#7a3650}
    /* CSS –¥–ª—è –≤—Å–ø–ª—ã–≤–∞—é—â–∏—Ö —Å–µ—Ä–¥–µ—á–µ–∫ */
    .heart-pop {
      position: absolute;
      pointer-events: none;
      font-size: 18px;
      animation: heartFloat 1s ease-out forwards;
      opacity: 0;
      z-index: 99999;          /* ‚ù§Ô∏è –ø–æ–≤–µ—Ä—Ö –≤—Å–µ–≥–æ */
      transform-origin: center;
    }


    @keyframes heartFloat {
      0% { transform: translateY(0) scale(0.8); opacity: 1; }
      50% { transform: translateY(-20px) scale(1); opacity: 1; }
      100% { transform: translateY(-40px) scale(1.25); opacity: 0; }
    }

    .modal-heart {
      position: fixed;
      font-size: 35px;
      pointer-events: none;
      z-index: 999999;
      opacity: 0;
      animation: floatModalHearts 1.4s ease-out forwards;
    }

    @keyframes floatModalHearts {
      0%   { transform: translateY(0) scale(0.9); opacity: 0; }
      20%  { opacity: 1; }
      100% { transform: translateY(-60px) scale(1.3); opacity: 0; }
    }

    .btn {
      background: linear-gradient(135deg, #ffb8d8, #ffdae9);
      border: none;
      padding: 10px 18px;
      border-radius: 12px;
      font-size: 14px;
      font-weight: 600;
      color: #7a2b57;
      cursor: pointer;
      transition: transform 0.15s ease, box-shadow 0.15s ease;
      box-shadow: 0 4px 12px rgba(139, 45, 86, 0.15);
    }

    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(139, 45, 86, 0.25);
    }

    .btn:active {
      transform: scale(0.97);
    }

    .btn-heart {
      position: absolute;
      font-size: 18px;
      pointer-events: none;
      opacity: 0;
      transform: translateY(0) scale(0.8);
      animation: btnHeartFloat 0.8s ease-out forwards;
      z-index: 999999;
    }

    @keyframes btnHeartFloat {
      0%   { opacity: 1; transform: translateY(0) scale(0.9); }
      70%  { opacity: 1; transform: translateY(-22px) scale(1); }
      100% { opacity: 0; transform: translateY(-40px) scale(1.2); }
    }


    /* –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è –º–æ–¥–∞–ª–∫–∏ */
    .modal-backdrop {
      animation: backdropFadeIn 0.35s ease forwards;
      opacity: 0;
    }

    @keyframes backdropFadeIn {
      from { opacity: 0; }
      to   { opacity: 1; }
    }

    .modal {
      animation: modalShow 0.35s ease forwards;
      transform: translateY(20px) scale(0.96);
      opacity: 0;
    }

    @keyframes modalShow {
      to {
        transform: translateY(0) scale(1);
        opacity: 1;
      }
    }

    /* –ê–Ω–∏–º–∞—Ü–∏—è –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è */
    .modal-backdrop.hide {
      animation: backdropFadeOut 0.3s ease forwards;
    }

    @keyframes backdropFadeOut {
      from { opacity: 1; }
      to   { opacity: 0; }
    }

    .modal.hide {
      animation: modalHide 0.3s ease forwards;
    }

    @keyframes modalHide {
      from {
        transform: translateY(0) scale(1);
        opacity: 1;
      }
      to {
        transform: translateY(20px) scale(0.96);
        opacity: 0;
      }
    }


  </style>
</head>
<body>

  <canvas id="hearts"></canvas>

  <header>
    <div class="brand">
      <div class="logo">M&S</div>
      <div class="title">
        <div class="names">Manuchehr & ùíÆùíΩùìäùì¥ùìá‚Ñ¥ùìÉùí∂ (Shuki)</div>
        <div class="sub">–ú–∏—Ä, —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Ç–æ–ª—å–∫–æ –¥–ª—è –Ω–∞—Å</div>
      </div>
    </div>
    <div id="menuBtn">‚ò∞</div>

    <nav class="tabs" id="navTabs">
      <div class="tab active" data-tab="home">–ì–ª–∞–≤–Ω–∞—è</div>
      <div class="tab" data-tab="thoughts">–ú–æ–∏ –º—ã—Å–ª–∏</div>
      <div class="tab" data-tab="dreams">–ù–∞—à–∏ –º–µ—á—Ç—ã</div>
      <div class="tab" data-tab="likes">–ù–∞—à–∏ –º–∞–ª–µ–Ω—å–∫–∏–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è</div>
    </nav>
  </header>

  <main>
    <section id="home" class="card fade">
      <h1>–ú—ã —Å–∫–æ—Ä–æ –±—É–¥–µ–º –≤–º–µ—Å—Ç–µ</h1>
      <p class="lead">–ö–∞–∂–¥—ã–π –¥–µ–Ω—å ‚Äî –º–∞–ª–µ–Ω—å–∫–∞—è –º—ã—Å–ª—å, –±–æ–ª—å—à–æ–µ —á—É–≤—Å—Ç–≤–æ. –°—á—ë—Ç—á–∏–∫ –¥–æ –Ω–∞—à–µ–π —Å–≤–∞–¥—å–±—ã:</p>

      <div class="countdown">
        <div class="unit"><div class="num" id="days">--</div><div class="lbl">–î–Ω–µ–π</div></div>
        <div class="unit"><div class="num" id="hours">--</div><div class="lbl">–ß–∞—Å–æ–≤</div></div>
        <div class="unit"><div class="num" id="minutes">--</div><div class="lbl">–ú–∏–Ω—É—Ç</div></div>
        <div class="unit"><div class="num" id="seconds">--</div><div class="lbl">–°–µ–∫—É–Ω–¥</div></div>
      </div>

      <div style="margin-top:14px">
        <button class="btn" id="gotoThoughts">–û—Ç–∫—Ä—ã—Ç—å "–ú–æ–∏ –º—ã—Å–ª–∏"</button>
      </div>
    </section>

    <section id="thoughts" class="card fade" style="display:none">
      <h2>–ú–æ–∏ –º—ã—Å–ª–∏ ‚Äî 30 –¥–Ω–µ–π</h2>
      <p>–ö–ª–∏–∫–Ω–∏ –Ω–∞ –Ω–æ–º–µ—Ä –¥–Ω—è, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å –∑–∞–ø–∏—Å—å.</p>
      <div class="grid" id="calendar"></div>
    </section>

    <section id="dreams" class="card fade" style="display:none">
      <h2 style="margin-bottom:14px;">–ú–µ—á—Ç—ã</h2>


      <h3 style="color:#8c2f62; margin-top:24px;">–ï—ë –º–µ—á—Ç—ã</h3>
      <div class="card" style="margin-top:10px">
        –°—Ç–∞–Ω—Ü–µ–≤–∞—Ç—å –≤–∞–ª—å—Å –Ω–∞ —Å–≤–∞–¥—å–±–µ.
      </div>
      <div class="card" style="margin-top:10px">
        –ü–æ–µ—Ö–∞—Ç—å –≤ –ö–æ—Ä–µ—é.
      </div>
      <div class="card" style="margin-top:10px">
        –°—Ç–∞—Ç—å –ø–µ–¥–∏–∞—Ç—Ä–æ–º.
      </div>
      <div class="card" style="margin-top:10px">
        –ü–æ–µ—Ö–∞—Ç—å –≤ –¥–∏—Å–Ω–µ–π–ª–µ–Ω–¥.
      </div>
      <div class="card" style="margin-top:10px">
        –ì–æ—Ç–æ–≤–∏—Ç—å –¥–ª—è –º–µ–Ω—è, –±–æ–ª—Ç–∞—Ç—å —á–∞—Å–∞–º–∏ —Å–æ –º–Ω–æ–π, –≤—Å—Ç—Ä–µ—á–∞—Ç—å –º–µ–Ω—è —Å —Ä–∞–±–æ—Ç—ã, –≥—É–ª—è—Ç—å —Å–æ –º–Ω–æ–π.
      </div>

      <!-- –ú–æ–∏ –º–µ—á—Ç—ã -->
      <h3 style="color:#8c2f62; margin-top:24px;">–ú–æ–∏ –º–µ—á—Ç—ã</h3>
      <div class="card" style="margin-top:10px">
        –û–¥–Ω–∞–∂–¥—ã –ø—Ä–æ—Å—ã–ø–∞—Ç—å—Å—è —Ä—è–¥–æ–º —Å —Ç–æ–±–æ–π –∫–∞–∂–¥–æ–µ —É—Ç—Ä–æ.
      </div>
      <div class="card" style="margin-top:10px">
        –ü—É—Ç–µ—à–µ—Å—Ç–≤–æ–≤–∞—Ç—å —Å —Ç–æ–±–æ–π –≤ –Ω–æ–≤—ã–µ –≥–æ—Ä–æ–¥–∞ –∏ —Å—Ç—Ä–∞–Ω—ã, –ø—Ä–æ—Å—Ç–æ –¥–µ—Ä–∂–∞—Å—å –∑–∞ —Ä—É–∫–∏.
      </div>
      <div class="card" style="margin-top:10px">
        –£–≤–∏–¥–µ—Ç—å, –∫–∞–∫ —Ç—ã —É–ª—ã–±–∞–µ—à—å—Å—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å ‚Äî –∏ –±—ã—Ç—å –ø—Ä–∏—á–∏–Ω–æ–π —ç—Ç–æ–π —É–ª—ã–±–∫–∏.
      </div>
      <div class="card" style="margin-top:10px">
        –•–æ—á—É –≥–æ—Ç–æ–≤–∏—Ç—å –¥–ª—è —Ç–µ–±—è, –ø–æ–º–æ–≥–∞—Ç—å —Ç–µ–±–µ, –±–æ–ª—Ç–∞—Ç—å —á–∞—Å–∞–º–∏ —Å —Ç–æ–±–æ–π, –≥—É–ª—è—Ç—å —Å —Ç–æ–±–æ–π, —Ö–æ—á—É —á—Ç–æ–±—ã –≤—Å—Ç—Ä–µ—á–∞–ª–∞ —Å —Ä–∞–±–æ—Ç—ã.
      </div>
      <div class="card" style="margin-top:10px">
        –ü–æ–µ—Ö–∞—Ç—å –≤ –¥–∏—Å–Ω–µ–π–ª–µ–Ω–¥.
      </div>
      <div class="card" style="margin-top:10px">
        –ö—É—á–∞ –¥–µ–Ω–µ–≥ –∏ –æ–≥—Ä–æ–º–Ω—ã–π –¥–æ–º.
      </div>
      <div class="card" style="margin-top:10px">
        –ü—Ä—ã–≥–Ω—É—Ç—å —Å –ø–∞—Ä–∞—à—é—Ç–æ–º.
      </div>
    
      <!-- –ù–∞—à–∏ –º–µ—á—Ç—ã -->
      <h3 style="color:#8c2f62; margin-top:24px;">–ù–∞—à–∏ –º–µ—á—Ç—ã</h3>
      <div class="card" style="margin-top:10px">
        –ü–æ–ª–µ—Ç–µ—Ç—å –≤–º–µ—Å—Ç–µ –≤ –ö–æ—Ä–µ—é.
      </div>
      <div class="card" style="margin-top:10px">
        –ü–æ—Å–µ—Ç–∏—Ç—å –î–∏—Å–Ω–µ–π–ª–µ–Ω–¥.
      </div>
      <div class="card" style="margin-top:10px">
        –ü–æ—Å—Ç—Ä–æ–∏—Ç—å —Ç—ë–ø–ª—ã–π –¥–æ–º, –≤ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥–µ—Ç –º–Ω–æ–≥–æ —Å–≤–µ—Ç–∞ –∏ —Å–º–µ—Ö–∞.
      </div>
      <div class="card" style="margin-top:10px">
        –î–µ–ª–∞—Ç—å –≤—Å–µ –≤—Å–µ –≤–º–µ—Å—Ç–µ. –£—á–∏—Ç—å—Å—è, —Ä–∞–∑–≤–∏–≤–∞—Ç—å—Å—è, –≥—É–ª—è—Ç—å, —Å–º–æ—Ç—Ä–µ—Ç—å —Ñ–∏–ª—å–º—ã –∏ —Å–µ—Ä–∏–∞–ª—ã, –∏–≥—Ä–∞—Ç—å, –±–æ–ª—Ç–∞—Ç—å, –¥—É—Ä–∞—á–∏—Ç—å—Å—è, –ø–æ–º–æ–≥–∞—Ç—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å.
      </div>
      <div class="card" style="margin-top:10px">
        –ü–æ—Å–µ—Ç–∏—Ç—å —Å–∞–º—ã–µ –ø—Ä–µ–∫—Ä–∞—Å–Ω—ã–µ –º–µ—Å—Ç–∞ –≤ –º–∏—Ä–µ.
      </div>
    </section>
    

    <section id="likes" class="card fade" style="display:none">
      <h2>–ù–∞—à–∏ –º–∞–ª–µ–Ω—å–∫–∏–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è</h2>
      <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:10px">
        <div class="card">‚úçÔ∏è –ü–ª–æ—Ö–æ–π –ø–æ—á–µ—Ä–∫ (–Ω–æ —É —Ç–µ–±—è –∫—Ä–∞—Å–∏–≤–µ–µ)</div>
        <div class="card">üéÇ –û–±–∞ —Ä–æ–¥–∏–ª–∏—Å—å –≤ –∞–≤–≥—É—Å—Ç–µ ‚Äî —Ä–∞–∑–Ω–∏—Ü–∞ –≤—Å–µ–≥–æ 5 –¥–Ω–µ–π (8 –∏ 13)</div>
        <div class="card">ü´ñ –õ—é–±–∏–º —á–∞–π</div>
        <div class="card">ü•î –õ—é–±–∏–º –∂–∞—Ä–µ–Ω—É—é –∫–∞—Ä—Ç–æ—à–∫—É</div>
        <div class="card">üí¨ –õ—é–±–∏–º –±–æ–ª—Ç–∞—Ç—å –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º</div>
        <div class="card">üéß –°–ª—É—à–∞–µ–º –º—É–∑—ã–∫—É</div>
        <div class="card">üè° –õ—é–±–∏–º —Å–∏–¥–µ—Ç—å –¥–æ–º–∞, –Ω–æ –∏ –ø—É—Ç–µ—à–µ—Å—Ç–≤–æ–≤–∞—Ç—å —Ç–æ–∂–µ</div>
        <div class="card">üö∂‚Äç‚ôÇÔ∏èüö∂‚Äç‚ôÄÔ∏è –õ—é–±–∏–º –≥—É–ª—è—Ç—å</div>
        <div class="card">–ú–æ–∂–µ—Ç —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π –∫—É–¥–∞ –±–æ–ª—å—à–µ. –°–∫–æ—Ä–æ —É–∑–Ω–∞–µ–º üòÅ</div>
      </div>
    </section>
    
  </main>

  <footer>–°–¥–µ–ª–∞–Ω–æ —Å –ª—é–±–æ–≤—å—é <br>Manuchehr ‚ù§Ô∏è ùíÆùíΩùìäùì¥ùìá‚Ñ¥ùìÉùí∂</footer>

  <div id="modal-root" style="display:none"></div>

<script>
  let isAuthorMode = false; // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é Shuki-—Ä–µ–∂–∏–º
  /* Hearts animation */


  const DIARY = {
  1: {
    text: "–°–µ–≥–æ–¥–Ω—è –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –Ω–∞—à –º–∞–ª–µ–Ω—å–∫–∏–π –ø—É—Ç—å‚Ä¶ 30 –¥–Ω–µ–π, 30 –º—ã—Å–ª–µ–π, 30 –∫—É—Å–æ—á–∫–æ–≤ –º–æ–µ–≥–æ —Å–µ—Ä–¥—Ü–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ–±—è, –º–æ—è ùíÆùì±ùìæùì¥ùì≤ ‚ù§Ô∏è",
    image: "",
    video: "",
    music: ""
  },
  2: {
    text: "–ò–Ω–æ–≥–¥–∞ —è –ª–æ–≤–ª—é —Å–µ–±—è –Ω–∞ –º—ã—Å–ª–∏, —á—Ç–æ —Ö–æ—á—É —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞—Ç—å —Ç–µ–±–µ –≤–æ–æ–±—â–µ –≤—Å—ë - –¥–∞–∂–µ —Å–∞–º—ã–µ –º–∞–ª–µ–Ω—å–∫–∏–µ –≤–µ—â–∏. –¢—ã —Å—Ç–∞–ª–∞ –º–æ–µ–π –ø—Ä–∏–≤—ã—á–∫–æ–π, –º–æ–µ–π —Ç–∏—Ö–æ–π —Ä–∞–¥–æ—Å—Ç—å—é –∫–∞–∂–¥—ã–π –¥–µ–Ω—å.",
    image: "",
    video: "",
    music: ""
  },
  3: {
    text: "–ö–æ–≥–¥–∞ —Ç—ã –ø–∏—à–µ—à—å –º–Ω–µ, —É –º–µ–Ω—è –≤–Ω—É—Ç—Ä–∏ –±—É–¥—Ç–æ –∑–∞–≥–æ—Ä–∞–µ—Ç—Å—è –º–∞–ª–µ–Ω—å–∫–∏–π —Ñ–æ–Ω–∞—Ä–∏–∫. –ò –¥–∞–∂–µ –µ—Å–ª–∏ –¥–µ–Ω—å —Ç—è–∂—ë–ª—ã–π - —Ç—ã –¥–µ–ª–∞–µ—à—å –µ–≥–æ –º—è–≥–∫–∏–º –∏ —Å–≤–µ—Ç–ª—ã–º <3.",
    image: "",
    video: "",
    music: ""
  },
  4: {
    text: "–ú–Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è, —á—Ç–æ –º—ã –º–æ–∂–µ–º –≥–æ–≤–æ—Ä–∏—Ç—å –æ–±–æ –≤—Å—ë–º. –¢—ã —Ç–∞ —Å–∞–º–∞—è –ø—Ä–µ—Å–∞–º–∞—è, —Å –∫–µ–º —è —Ö–æ—á—É –±—ã—Ç—å –Ω–∞—Å—Ç–æ—è—â–∏–º. –ë–µ–∑ –º–∞—Å–æ–∫, –±–µ–∑ –∏–≥—Ä, –ø—Ä–æ—Å—Ç–æ —Å–æ–±–æ–π.",
    image: "",
    video: "",
    music: ""
  },
  5: {
    text: "–ò–Ω–æ–≥–¥–∞ —è –¥—É–º–∞—é: –∫–∞–∫–∏–º —á—É–¥–æ–º —Ç—ã –≤–æ–æ–±—â–µ –ø–æ—è–≤–∏–ª–∞—Å—å –≤ –º–æ–µ–π –∂–∏–∑–Ω–∏? –ò –∫–∞–∫ —è —Ä–∞–Ω—å—à–µ –∂–∏–ª –±–µ–∑ —Ç–µ–±—è‚Ä¶)",
    image: "",
    video: "",
    music: ""
  },
  6: {
    text: "–¢—ã –¥–∞–∂–µ –Ω–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—à—å, –Ω–∞—Å–∫–æ–ª—å–∫–æ —Ç—ã –≤–ª–∏–ª–∞—Å—å –≤ –º–æ–∏ –º—ã—Å–ª–∏. –ì–¥–µ –±—ã —è –Ω–∏ –±—ã–ª, —á—Ç–æ –±—ã –Ω–∏ –¥–µ–ª–∞–ª - —Ç—ã –≤—Å–µ–≥–¥–∞ —Å–æ –º–Ω–æ–π üòä.",
    image: "",
    video: "",
    music: ""
  },
  7: {
    text: "–ú–Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—Ç—å, –∫–∞–∫ –º—ã –∏–¥—ë–º —Ä—è–¥–æ–º, —Å–º–µ—ë–º—Å—è, –≤—ã–±–∏—Ä–∞–µ–º —Ñ–∏–ª—å–º, –≥—É–ª—è–µ–º, –ø—Ä–æ—Å—Ç–æ –º–æ–ª—á–∏–º‚Ä¶ –∏ –≤—Å—ë —Ä–∞–≤–Ω–æ –≤–º–µ—Å—Ç–µ.",
    image: "",
    video: "",
    music: ""
  },
  8: {
    text: "–ö–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ –≤–∏–∂—É —Ç–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, —è –±—É–¥—Ç–æ —Å–ª—ã—à—É —Ç–≤–æ–π –≥–æ–ª–æ—Å. –ò —ç—Ç–æ —Å–∞–º–æ–µ —Ç—ë–ø–ª–æ–µ —á—É–≤—Å—Ç–≤–æ –∑–∞ –¥–µ–Ω—å. ü•∞",
    image: "",
    video: "",
    music: ""
  },
  9: {
    text: "–Ø –ª—é–±–ª—é, –∫–∞–∫ —Ç—ã –¥—É–º–∞–µ—à—å. –ö–∞–∫ —Ä–µ–∞–≥–∏—Ä—É–µ—à—å. –ö–∞–∫ –≥–æ–≤–æ—Ä–∏—à—å. –¢—ã - –º–æ—è –º–∞–ª–µ–Ω—å–∫–∞—è –í—Å–µ–ª–µ–Ω–Ω–∞—è, –≤ –∫–æ—Ç–æ—Ä–æ–π –≤—Å–µ–≥–¥–∞ —Ç–µ–ø–ª–æ üíó.",
    image: "",
    video: "",
    music: ""
  },
  10: {
    text: "–ï—Å–ª–∏ –±—ã —Ç—ã –∑–Ω–∞–ª–∞, –∫–∞–∫ –º–Ω–æ–≥–æ –Ω–µ–∂–Ω–æ—Å—Ç–∏ —É –º–µ–Ω—è –∫ —Ç–µ–±–µ‚Ä¶ –ò–Ω–æ–≥–¥–∞ –¥–∞–∂–µ –Ω–µ –ø–æ–º–µ—â–∞–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ ‚ù§Ô∏è‚Äçüî•‚ù§Ô∏è‚Äçüî•‚ù§Ô∏è‚Äçüî•",
    image: "",
    video: "",
    music: ""
  },
  11: {
    text: "–ú–Ω–µ –≤–∞–∂–µ–Ω –∫–∞–∂–¥—ã–π —Ç–≤–æ–π –¥–µ–Ω—å. –•–æ—á—É, —á—Ç–æ–±—ã —Ç—ã –±—ã–ª–∞ —Å–ø–æ–∫–æ–π–Ω–æ–π, —Å—á–∞—Å—Ç–ª–∏–≤–æ–π –∏ —á—Ç–æ–±—ã —Ç—ã —á—É–≤—Å—Ç–≤–æ–≤–∞–ª–∞ –º–æ—é –ø–æ–¥–¥–µ—Ä–∂–∫—É, –¥–∞–∂–µ –µ—Å–ª–∏ –ø–æ–∫–∞ —á—Ç–æ —è –Ω–µ —Ä—è–¥–æ–º.",
    image: "",
    video: "",
    music: ""
  },
  12: {
    text: "–¢—ã —É–º–µ–µ—à—å –≤–¥–æ—Ö–Ω–æ–≤–ª—è—Ç—å –º–µ–Ω—è –ø—Ä–æ—Å—Ç–æ —Ç–µ–º, —á—Ç–æ —Å—É—â–µ—Å—Ç–≤—É–µ—à—å. –ë–ª–∞–≥–æ–¥–∞—Ä—è —Ç–µ–±–µ —è —Å—Ç–∞–ª –º—è–≥—á–µ‚Ä¶ –∏ –ª—É—á—à–µ. üòÅüòÅüòÅ",
    image: "",
    video: "",
    music: ""
  },
  13: {
    text: "–ú–Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è —Ç–≤–æ–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä. –î–∞–∂–µ –∫–æ–≥–¥–∞ —Ç—ã –≤ —à—É—Ç–∫—É –æ–±–∏–∂–∞–µ—à—å—Å—è - —Ç—ã –≤—Å—ë —Ä–∞–≤–Ω–æ —Å–∞–º–∞—è —Å–∞–º–∞—è –ª—é–±–∏–º–∞—è ‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è",
    image: "",
    video: "",
    music: ""
  },
  14: {
    text: "–Ø –∂–¥—É –∫–æ–≥–¥–∞ –æ–¥–Ω–∞–∂–¥—ã –ø—Ä–æ—Å–Ω—É—Å—å –∏ —É–≤–∏–∂—É —Ç–µ–±—è —Ä—è–¥–æ–º. –í–∏–¥–µ—Ç—å, –∫–∞–∫ —Ç—ã —Å–ø–∏—à—å, –∫–∞–∫ —Ç–∏—Ö–æ –¥—ã—à–∏—à—å. –ö–∞–∫ –±—É–¥—Ç–æ –≤–µ—Å—å –º–∏—Ä —Ä—è–¥–æ–º —Å–æ –º–Ω–æ–π.",
    image: "",
    video: "",
    music: ""
  },
  15: {
    text: "–°–ø–∞—Å–∏–±–æ —Ç–µ–±–µ –∑–∞ —Ç–æ, —á—Ç–æ —Ç—ã –µ—Å—Ç—å. –ó–∞ —Ç–æ, —á—Ç–æ —á–∏—Ç–∞–µ—à—å —ç—Ç–∏ —Å—Ç—Ä–æ–∫–∏. –ó–∞ —Ç–æ, —á—Ç–æ —Å—Ç–∞–ª–∞ —Ç–æ–π, —Ä–∞–¥–∏ –∫–æ—Ç–æ—Ä–æ–π —è —Å—Ç–∞—Ä–∞—é—Å—å üíò",
    image: "",
    video: "",
    music: ""
  },
  16: {
    text: "–¢—ã - —Å–∞–º–æ–µ –∫—Ä–∞—Å–∏–≤–æ–µ —á—É–≤—Å—Ç–≤–æ, –∫–æ—Ç–æ—Ä–æ–µ —Å–æ –º–Ω–æ–π –∫–æ–≥–¥–∞-–ª–∏–±–æ —Å–ª—É—á–∞–ª–æ—Å—å. –ù–µ –≥—Ä–æ–º–∫–æ–µ. –ù–µ —Ä–µ–∑–∫–æ–µ. –ê —Ç–∏—Ö–æ–µ, –Ω–µ–∂–Ω–æ–µ, –Ω–∞—Å—Ç–æ—è—â–µ–µ.",
    image: "",
    video: "",
    music: ""
  },
  17: {
    text: "–ò–Ω–æ–≥–¥–∞ –º–Ω–µ –∫–∞–∂–µ—Ç—Å—è, —á—Ç–æ –º–µ–∂–¥—É –Ω–∞–º–∏ –µ—Å—Ç—å —á—Ç–æ-—Ç–æ —Å–≤–æ—ë‚Ä¶ —Ç–æ, —á—Ç–æ –ø–æ–Ω–∏–º–∞–µ–º —Ç–æ–ª—å–∫–æ –º—ã. –ò –º–Ω–µ —ç—Ç–æ –æ—á–µ–Ω—å –Ω—Ä–∞–≤–∏—Ç—Å—è. üòÅüíû",
    image: "",
    video: "",
    music: ""
  },
  18: {
    text: "–Ø –∑–Ω–∞—é, —á—Ç–æ –º—ã —Å–ø—Ä–∞–≤–∏–º—Å—è —Å–æ –≤—Å–µ–º. –ü–æ—Ç–æ–º—É —á—Ç–æ —É –Ω–∞—Å –µ—Å—Ç—å –¥–æ–≤–µ—Ä–∏–µ. –ò —É –Ω–∞—Å –µ—Å—Ç—å –º—ã.",
    image: "",
    video: "",
    music: ""
  },
  19: {
    text: "–ö–æ–≥–¥–∞ —Ç—ã —É–ª—ã–±–∞–µ—à—å—Å—è ‚Äî –º–Ω–µ –±—É–¥—Ç–æ –≤–µ—Å—å –º–∏—Ä —É–ª—ã–±–∞–µ—Ç—Å—è. –¢—ã –¥–∞–∂–µ –Ω–µ –∑–Ω–∞–µ—à—å, –Ω–∞—Å–∫–æ–ª—å–∫–æ —Ç—ã –æ—Å–æ–±–µ–Ω–Ω–∞—è ü§ç",
    image: "",
    video: "",
    music: ""
  },
  20: {
    text: "–ú–Ω–µ —Ö–æ—á–µ—Ç—Å—è –¥–µ–ª–∞—Ç—å —Ç–µ–±—è —Å—á–∞—Å—Ç–ª–∏–≤–æ–π –∫–∞–∂–¥—ã–π –¥–µ–Ω—å. –ú–∞–ª–µ–Ω—å–∫–∏–º–∏ –¥–µ–π—Å—Ç–≤–∏—è–º–∏, —Å–ª–æ–≤–∞–º–∏, –≤–Ω–∏–º–∞–Ω–∏–µ–º. –¢—ã —ç—Ç–æ–≥–æ –¥–æ—Å—Ç–æ–π–Ω–∞.üòä",
    image: "",
    video: "",
    music: ""
  },
  21: {
    text: "–ï—Å–ª–∏ –±—ã —è –º–æ–≥, —è –±—ã —Å–µ–π—á–∞—Å –æ–±–Ω—è–ª —Ç–µ–±—è —Ç–∞–∫ —Ç–∏—Ö–æ, —Ç–∞–∫ –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ‚Ä¶ —á—Ç–æ–±—ã —Ç—ã –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞–ª–∞ - —Ç—ã –¥–æ–º–∞. ü§óü§óü§ó",
    image: "",
    video: "",
    music: ""
  },
  22: {
    text: "–Ø –ª—é–±–ª—é —Ç–µ–±—è. –ü—Ä–æ—Å—Ç–æ –ª—é–±–ª—é. –°–∏–ª—å–Ω–æ —Å–∏–ª—å–Ω–æ. –î–æ –±–µ–∑—É–º–∏—è. –¢—ã –º–æ—è –ø–µ—Ä–≤–∞—è –∏ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –ª—é–±–æ–≤—å. –¢—ã —Å–æ –º–Ω–æ–π –Ω–∞–≤—Å–µ–≥–¥–∞ –º–æ—è –ø–∏–Ω–≥–≤–∏–Ω–∏—Ö–∞‚ù§Ô∏èüòÅüêß",
    image: "",
    video: "",
    music: ""
  },
  23: {
    text: "–ö–æ–≥–¥–∞ —Ç—ã –≥–æ–≤–æ—Ä–∏—à—å —á—Ç–æ-—Ç–æ –¥–æ–±—Ä–æ–µ - —É –º–µ–Ω—è –Ω–∞ —Å–µ—Ä–¥—Ü–µ —Ç–µ–ø–ª–µ–µ üíò",
    image: "",
    video: "",
    music: ""
  },
  24: {
    text: "–¢—ã - —Ç–æ —á—É–≤—Å—Ç–≤–æ, –∫–æ—Ç–æ—Ä–æ–µ —Ö–æ—á–µ—Ç—Å—è –¥–µ—Ä–∂–∞—Ç—å –∞–∫–∫—É—Ä–∞—Ç–Ω–æ. –¢—ã –¥–ª—è –º–µ–Ω—è –≤–∞–∂–Ω–∞, –æ—á–µ–Ω—å –≤–∞–∂–Ω–∞ ‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è",
    image: "",
    video: "",
    music: ""
  },
  25: {
    text: "–ú–Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è –º–µ—á—Ç–∞—Ç—å –æ –±—É–¥—É—â–µ–º —Å —Ç–æ–±–æ–π. –ü—Ä–µ–¥—Å—Ç–∞–≤–ª—è—Ç—å –º–∞–ª–µ–Ω—å–∫–∏–µ –º–æ–º–µ–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã—Ö –µ—â—ë –Ω–µ—Ç, –Ω–æ –∫–æ—Ç–æ—Ä—ã–µ —Ç–æ—á–Ω–æ –±—É–¥—É—Ç. üòåüòä",
    image: "",
    video: "",
    music: ""
  },
  26: {
    text: "–¢—ã –º–µ–Ω—è –≤–¥–æ—Ö–Ω–æ–≤–ª—è–µ—à—å. –ú–Ω–µ —Ö–æ—á–µ—Ç—Å—è —Ä–∞–±–æ—Ç–∞—Ç—å, —Ä–∞—Å—Ç–∏, —Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è –ª—É—á—à–µ - –¥–ª—è —Ç–µ–±—è, –¥–ª—è –Ω–∞—Å.",
    image: "",
    video: "",
    music: ""
  },
  27: {
    text: "–ú–Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è –¥—É–º–∞—Ç—å –æ —Ç–æ–º, —á—Ç–æ –æ–¥–Ω–∞–∂–¥—ã –º—ã –±—É–¥–µ–º –≤—Å–ø–æ–º–∏–Ω–∞—Ç—å —ç—Ç–æ –≤—Ä–µ–º—è —Å —É–ª—ã–±–∫–æ–π. –û–Ω–æ - –Ω–∞—á–∞–ª–æ –Ω–∞—à–µ–≥–æ –ø—É—Ç–∏.",
    image: "",
    video: "",
    music: ""
  },
  28: {
    text: "–®—É–∫–∏, —Ç—ã –Ω–µ –ø—Ä–æ—Å—Ç–æ –∂–µ–Ω–∞. –¢—ã - –º–æ—è —Ç—ë–ø–ª–∞—è –º—ã—Å–ª—å –∫–∞–∂–¥—ã–π –¥–µ–Ω—å. –ú–æ–π —á–µ–ª–æ–≤–µ–∫. –ú–æ—ë –º–∞–ª–µ–Ω—å–∫–æ–µ —á—É–¥–æ.üíñüíìüí´",
    image: "",
    video: "",
    music: ""
  },
  29: {
    text: "–°–ø–∞—Å–∏–±–æ, —á—Ç–æ –æ—Ç–∫—Ä—ã–ª–∞—Å—å –º–Ω–µ. –ß—Ç–æ –¥–æ–≤–µ—Ä—è–µ—à—å. –ß—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—à—å –ª—é–±–∏—Ç—å —Ç–µ–±—è —Ç–∞–∫, –∫–∞–∫ —É–º–µ—é.",
    image: "",
    video: "",
    music: ""
  },
  30: {
    text: "–≠—Ç–æ –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–Ω—å, –Ω–æ –Ω–µ –ø–æ—Å–ª–µ–¥–Ω–∏–π —à–∞–≥. –í–ø–µ—Ä–µ–¥–∏ –Ω–∞—à–∞ –∂–∏–∑–Ω—å. –ò —è —Ö–æ—á—É –ø—Ä–æ–π—Ç–∏ –µ—ë —Ä—è–¥–æ–º —Å —Ç–æ–±–æ–π. –Ø —Ç–µ–±—è –ª—é–±–ª—é ‚ù§Ô∏è",
    image: "",
    video: "",
    music: ""
  }
};


  function closeModalSmooth() {
  const root = document.getElementById("modal-root");
  const backdrop = root.querySelector(".modal-backdrop");
  const modal = root.querySelector(".modal");

  if (!backdrop || !modal) return;

  backdrop.classList.add("hide");
  modal.classList.add("hide");

  // –ü–æ—Å–ª–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –ø—Ä–æ—Å—Ç–æ —É–±—Ä–∞—Ç—å –æ–∫–Ω–æ
  setTimeout(() => {
    root.style.display = "none";
    root.innerHTML = "";
  }, 300); // —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å CSS animation: 0.3s
}


function spawnModalHearts() {
  const modal = document.querySelector(".modal");
  if (!modal) return;

  const rect = modal.getBoundingClientRect();
  const emojis = ['üíó','üíò','üíñ','üíï','üíû','‚ù§Ô∏è‚Äçüî•'];

  for (let i = 0; i < 6; i++) {
    const h = document.createElement("div");
    h.className = "modal-heart";
    h.textContent = emojis[Math.floor(Math.random() * emojis.length)];

    const x = rect.left + Math.random() * rect.width;
    const y = rect.top + rect.height + 20;

    h.style.left = `${x}px`;
    h.style.top = `${y}px`;

    document.body.appendChild(h);

    setTimeout(() => h.remove(), 1500);
  }
}

function enableAuthorMode() {
  isAuthorMode = true;
  localStorage.setItem("shuki_author", "1");
  alert("–†–µ–∂–∏–º –∞–≤—Ç–æ—Ä–∞ –≤–∫–ª—é—á—ë–Ω ‚ù§Ô∏è");
}

// –µ—Å–ª–∏ —Ç—ã —Ä–∞–Ω–µ–µ –≤–∫–ª—é—á–∞–ª ‚Äî —Å—Ä–∞–∑—É –≤–∫–ª—é—á–∏—Ç—Å—è
if (localStorage.getItem("shuki_author") === "1") {
  isAuthorMode = true;
}

function installSecretTouch(element, dayNumber) {
  let clickCount = 0;
  let lastClickTime = 0;
  let holdTimer;

  element.addEventListener("mousedown", start);
  element.addEventListener("touchstart", start);

  element.addEventListener("mouseup", cancel);
  element.addEventListener("mouseleave", cancel);
  element.addEventListener("touchend", cancel);

  function start(e) {
    const now = Date.now();

    if (now - lastClickTime < 350) {
      clickCount++;
    } else {
      clickCount = 1;
    }

    lastClickTime = now;

    if (clickCount === 2) {
      // –¥–ª–∏–Ω–Ω–æ–µ —É–¥–µ—Ä–∂–∞–Ω–∏–µ
      holdTimer = setTimeout(() => {
        enableAuthorMode();
      }, 900);
    }
  }

  function cancel() {
    clearTimeout(holdTimer);
  }
}
(function(){
  const canvas=document.getElementById('hearts');
  const ctx=canvas.getContext('2d');
  let w=canvas.width=innerWidth, h=canvas.height=innerHeight;
  addEventListener('resize',()=>{w=canvas.width=innerWidth;h=canvas.height=innerHeight});
  function r(a,b){return Math.random()*(b-a)+a}
  const parts=[];
  function make(){return{x:r(0,w),y:h+40,vx:r(-0.4,0.4),vy:r(-1.4,-0.5),s:r(12,30),o:r(0.35,0.9),rot:r(0,Math.PI*2)}}
  for(let i=0;i<34;i++)parts.push(make());
  function draw(p){
    ctx.save();ctx.translate(p.x,p.y);ctx.rotate(p.rot);ctx.scale(p.s/40,p.s/40);
    ctx.beginPath();ctx.moveTo(0,-8);
    ctx.bezierCurveTo(20,-40,60,-40,60,-8);
    ctx.bezierCurveTo(60,30,30,50,0,70);
    ctx.bezierCurveTo(-30,50,-60,30,-60,-8);
    ctx.bezierCurveTo(-60,-40,-20,-40,0,-8);
    ctx.closePath();ctx.fillStyle='rgba(171,68,118,'+p.o+')';ctx.fill();ctx.restore()
  }
  (function loop(){
    ctx.clearRect(0,0,w,h);
    for(let i=0;i<parts.length;i++){
      const p=parts[i];
      p.x+=p.vx;p.y+=p.vy;p.rot+=0.01;
      draw(p);
      if(p.y<-120||p.x<-120||p.x>w+120)parts[i]=make()
    }
    requestAnimationFrame(loop)
  })();
})();

/* Tabs SPA */
const tabsNode=document.getElementById('navTabs');
const tabBtns=document.querySelectorAll('.tab');
const screens={
  home:document.getElementById('home'),
  thoughts:document.getElementById('thoughts'),
  dreams:document.getElementById('dreams'),
  likes:document.getElementById('likes')
};
Object.values(screens).forEach(s=>s.classList.add('fade'));

function activate(name){
  tabBtns.forEach(b=>b.classList.toggle('active', b.dataset.tab===name));
  Object.keys(screens).forEach(k=>{
    if(k===name){
      screens[k].style.display='block';
      setTimeout(()=>screens[k].classList.add('show'),20)
    } else {
      screens[k].classList.remove('show');
      setTimeout(()=>screens[k].style.display='none',250)
    }
  });
  document.getElementById('hearts').style.opacity=(name==='home'?1:0.45);
  localStorage.setItem('shuki_last_tab',name);
}

tabBtns.forEach(b=>b.addEventListener('click',()=>{activate(b.dataset.tab);navTabs.classList.remove('show')}));
document.getElementById('menuBtn').addEventListener('click',e=>{e.stopPropagation();navTabs.classList.toggle('show')});
document.addEventListener('click',e=>{if(!navTabs.contains(e.target)&&e.target.id!=='menuBtn')navTabs.classList.remove('show')});

activate(localStorage.getItem('shuki_last_tab') || 'home');

document.getElementById('gotoThoughts').addEventListener('click',()=>activate('thoughts'));

/* Countdown */
const target = new Date('2026-04-05T00:00:00');
function updateCountdown(){
  const now=new Date();
  let diff=Math.max(0,Math.floor((target-now)/1000));
  const days=Math.floor(diff/86400); diff%=86400;
  const hours=Math.floor(diff/3600); diff%=3600;
  const mins=Math.floor(diff/60); const secs=diff%60;

  document.getElementById('days').textContent=days;
  document.getElementById('hours').textContent=String(hours).padStart(2,'0');
  document.getElementById('minutes').textContent=String(mins).padStart(2,'0');
  document.getElementById('seconds').textContent=String(secs).padStart(2,'0');
}
updateCountdown();
setInterval(updateCountdown,1000);

/* ===== THOUGHTS: improved block/unblock system ===== */
const CAL_DAYS=30;
const STORAGE_KEY='shuki_thoughts_v1';
let diary={};
try{diary=JSON.parse(localStorage.getItem(STORAGE_KEY)||'{}')}catch(e){diary={}}

const cal=document.getElementById('calendar');

/* Modal for locked */
function showLockedModal(n, unlockDate) {
  const root = document.getElementById('modal-root');
  root.style.display = 'block';

  // —Ä–∞–∑–Ω—ã–µ –º–∏–ª—ã–µ —Ñ—Ä–∞–∑—ã üíó
  const messages = [
    "–Ø –∑–Ω–∞—é, —á—Ç–æ —Ç–µ–±–µ —Ç–∞–∫ —Ö–æ—á–µ—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç—å‚Ä¶ –Ω–æ —á—É—Ç—å-—á—É—Ç—å –ø–æ–¥–æ–∂–¥–∏ –µ—â—ë üòò",
    "–ù–µ —Ç–æ—Ä–æ–ø–∏—Å—å, –ª—é–±–∏–º–∞—è. –í—Ä–µ–º—è —Å–∫–æ—Ä–æ –ø—Ä–∏–¥—ë—Ç ‚ù§Ô∏è",
    "–¢—ã —Ç–∞–∫–∞—è –ª—é–±–æ–ø—ã—Ç–Ω–∞—è‚Ä¶ –Ω–æ —è —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –ø—Ä—è—á—É —ç—Ç–æ –¥–ª—è –æ—Å–æ–±–µ–Ω–Ω–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞ üíï",
    "–ï—â–µ —á—É—Ç—å-—á—É—Ç—å, –º–æ—è —Ö–æ—Ä–æ—à–∞—è. –Ø –≥–æ—Ç–æ–≤–ª—é —á—Ç–æ-—Ç–æ –º–∏–ª–æ–µ –¥–ª—è —Ç–µ–±—è üå∏",
    "–ü–æ–¥–æ–∂–¥–∏ –µ—â—ë –Ω–µ–º–Ω–æ–≥–æ‚Ä¶ —è —Ö–æ—á—É, —á—Ç–æ–±—ã —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç –±—ã–ª –æ—Å–æ–±–µ–Ω–Ω—ã–º üíó",
    "–¢—ã —É–∂–µ —Ö–æ—á–µ—à—å –∑–∞–≥–ª—è–Ω—É—Ç—å? –•–∏—Ç—Ä—é–ª—å–∫–∞ üòç –Ω–æ –ø–æ–∫–∞ –Ω–µ–ª—å–∑—è.",
    "–ü–æ—Ç–µ—Ä–ø–∏, –ª—é–±–æ–≤—å –º–æ—è. –≠—Ç–æ —Å—Ç–∞–Ω–µ—Ç –µ—â—ë –ø—Ä–∏—è—Ç–Ω–µ–µ, –∫–æ–≥–¥–∞ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è üíû",
    "–Ø –∑–Ω–∞—é, —á—Ç–æ —Ç—ã –∂–¥—ë—à—å‚Ä¶ –∏ –º–Ω–µ —ç—Ç–æ —Ç–∞–∫ –Ω—Ä–∞–≤–∏—Ç—Å—è üå∫",
    "–ï—â–µ –Ω–µ –≤—Ä–µ–º—è, —Å–æ–ª–Ω—ã—à–∫–æ. –ù–æ —Å–∫–æ—Ä–æ-—Å–∫–æ—Ä–æ üíò",
    "–ú–º–º‚Ä¶ –ª—é–±–æ–ø—ã—Ç–Ω–∞—è –º–∞–ª—ã—à–∫–∞. –ù–æ —Å–µ–≥–æ–¥–Ω—è —ç—Ç–æ—Ç –¥–µ–Ω—å –µ—â—ë —Å–ø–∏—Ç üåô"
  ];

  // –≤—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω—É—é —Ñ—Ä–∞–∑—É
  const randomMessage = messages[Math.floor(Math.random() * messages.length)];

  const dateStr = unlockDate.toLocaleDateString('ru-RU', {
    day: 'numeric',
    month: 'long'
  });

  root.innerHTML = `
    <div class="modal-backdrop">
      <div class="modal card">
        <h3>–î–µ–Ω—å ${n} –ø–æ–∫–∞ –∑–∞–∫—Ä—ã—Ç üîí</h3>

        <p style="margin-top:10px;font-size:16px;color:#6b3b50;">
          ${randomMessage}
        </p>

        <p style="margin-top:6px;font-size:14px;color:#8c6575;">
          –û–Ω –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ <b>${dateStr}</b>.
        </p>

        <div class="actions">
          <button class="btn" id="closeLocked">–ü–æ–Ω—è—Ç–Ω–æ ‚ù§Ô∏è</button>
        </div>
      </div>
    </div>
  `;
  

  document.getElementById("closeLocked").addEventListener("click", () => {
    closeModalSmooth();
  });
  setTimeout(() => spawnModalHearts(), 30);

}


/* Regular modal */
function escapeHtml(s){return String(s||'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;')}
function viewDay(n) {
  const cur = DIARY[n] || { text:"", image:"", video:"", music:"" };
  const root = document.getElementById("modal-root");
  root.style.display = "block";

  root.innerHTML = `
    <div class="modal-backdrop">
      <div class="modal card">
        <h3>–î–µ–Ω—å ${n}</h3>

        <p style="margin-top:12px;color:#6b3b50;">
          ${escapeHtml(cur.text || "–ó–∞–ø–∏—Å—å –ø–æ—è–≤–∏—Ç—Å—è –ø–æ–∑–∂–µ üíó")}
        </p>

        ${cur.image ? `<img src="${cur.image}" style="width:100%;margin-top:10px;border-radius:10px;">` : ""}

        ${cur.video ? `<iframe style="width:100%;height:200px;margin-top:10px;border-radius:10px;"
            src="${cur.video.replace("watch?v=", "embed/")}" frameborder="0"></iframe>` : ""}

        ${cur.music ? `<audio controls style="width:100%;margin-top:10px;">
            <source src="${cur.music}">
          </audio>` : ""}

        <div class="actions">
          <button class="btn" id="closeView">–•–æ—Ä–æ—à–æ üíó</button>
        </div>
      </div>
    </div>
  `;

  document.getElementById("closeView").addEventListener("click", () => {
    closeModalSmooth();
  });
  setTimeout(() => spawnModalHearts(), 30);

}

function openDay(n){
  const cur=diary[n]||{text:'',image:'',video:'',music:''};
  const root=document.getElementById('modal-root');
  root.style.display='block';

  root.innerHTML=`
    <div class="modal-backdrop">
      <div class="modal card">
        <h3>–î–µ–Ω—å ${n}</h3>

        <label>–¢–µ–∫—Å—Ç</label>
        <textarea id="m_text">${escapeHtml(cur.text)}</textarea>

        <label>–°—Å—ã–ª–∫–∞ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</label>
        <input id="m_image" type="text" value="${escapeHtml(cur.image)}">

        <label>–°—Å—ã–ª–∫–∞ –Ω–∞ –≤–∏–¥–µ–æ (YouTube)</label>
        <input id="m_video" type="text" value="${escapeHtml(cur.video)}">

        <label>–°—Å—ã–ª–∫–∞ –Ω–∞ –∞—É–¥–∏–æ</label>
        <input id="m_music" type="text" value="${escapeHtml(cur.music)}">

        <div class="actions">
          <button class="btn" id="saveBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
          <button class="btn" id="closeBtn">–ù–∞–∑–∞–¥</button>
        </div>
      </div>
    </div>`;

  document.getElementById('closeBtn').addEventListener('click',()=>{
    root.style.display='none';
    root.innerHTML='';
  });
  setTimeout(() => spawnModalHearts(), 30);


  document.getElementById('saveBtn').addEventListener('click',()=>{
    diary[n]={
      text:document.getElementById('m_text').value,
      image:document.getElementById('m_image').value,
      video:document.getElementById('m_video').value,
      music:document.getElementById('m_music').value
    };
    localStorage.setItem(STORAGE_KEY,JSON.stringify(diary));
    root.style.display='none';root.innerHTML='';
    renderCalendar();
  });
}

function spawnHearts(element, count = 3) {
  // element ‚Äî DOM-—É–∑–µ–ª .day (—É –Ω–µ–≥–æ position:relative –≤ CSS)
  if (!element) return;
  const rect = element.getBoundingClientRect();

  // –µ—Å–ª–∏ —ç–ª–µ–º–µ–Ω—Ç –Ω–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ ‚Äî —Å–¥–µ–ª–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω–æ
  if (getComputedStyle(element).position === 'static') {
    element.style.position = 'relative';
  }

  for (let i = 0; i < count; i++) {
    const heart = document.createElement('div');
    heart.className = 'heart-pop';
    // –º–æ–∂–Ω–æ –≤–∞—Ä—å–∏—Ä–æ–≤–∞—Ç—å —ç–º–æ–¥–∑–∏
    const emojis = ['üíó','üíû','üíï','üíò','üíñ'];
    heart.textContent = emojis[Math.floor(Math.random() * emojis.length)];

    // –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä—É–µ–º –≤–Ω—É—Ç—Ä–∏ —ç–ª–µ–º–µ–Ω—Ç–∞: —Ü–µ–Ω—Ç—Ä + —Ä–∞–Ω–¥–æ–º —Å–º–µ—â–µ–Ω–∏–µ
    const offsetX = (rect.width / 2) + (Math.random() * 40 - 20);
    const offsetY = (rect.height / 2) + (Math.random() * 10 - 5);

    heart.style.left = `${offsetX}px`;
    heart.style.top  = `${offsetY}px`;

    // —Å–ª—É—á–∞–π–Ω—ã–π —Ä–∞–∑–º–µ—Ä/–≤—Ä–µ–º—è
    const size = 14 + Math.floor(Math.random() * 16); // 14..30px
    heart.style.fontSize = `${size}px`;
    heart.style.opacity = '0';

    element.appendChild(heart);

    // —É–¥–∞–ª—è–µ–º —á–µ—Ä–µ–∑ —á—É—Ç—å –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ —á–µ–º –¥–ª–∏—Ç—Å—è –∞–Ω–∏–º–∞—Ü–∏—è
    setTimeout(() => {
      if (heart && heart.parentNode) heart.remove();
    }, 1000);
  }
}

function spawnButtonHeart(btn) {
  const heart = document.createElement("div");
  heart.className = "btn-heart";

  const emojis = ["üíó", "üíñ", "üíï", "üíò"];
  heart.textContent = emojis[Math.floor(Math.random() * emojis.length)];

  // —Ä–æ–¥–∏—Ç–µ–ª—å ‚Äî –∫–Ω–æ–ø–∫–∞
  btn.style.position = "relative";

  heart.style.left = "50%";
  heart.style.top = "-8px";
  heart.style.transform = "translateX(-50%)";

  btn.appendChild(heart);

  setTimeout(() => heart.remove(), 900);
}

/* Calendar render with blocking logic */
function renderCalendar() {
  cal.innerHTML = '';
  const startDate = new Date('2025-11-23T00:00:00');
  const now = new Date();

  for (let i = 1; i <= CAL_DAYS; i++) {
    const d = document.createElement('div');
    d.className = 'day';
    d.dataset.day = i;
    d.innerHTML = `<div class="num">–î–µ–Ω—å ${i}</div>`;

    const unlockDate = new Date(startDate);
    unlockDate.setDate(startDate.getDate() + (i - 1));

    const isUnlocked = now >= unlockDate;

    if (!isUnlocked) {
      d.classList.add('locked');
      d.addEventListener('click', () => {
        spawnHearts(d);                    // ‚ù§Ô∏è —Å–µ—Ä–¥–µ—á–∫–∏ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞—é—Ç
        showLockedModal(i, unlockDate);    // –º–æ–¥–∞–ª–∫–∞ ‚Äú–ø–æ–¥–æ–∂–¥–∏‚Äù
      });

    } else {
      d.addEventListener("click", () => {
        spawnHearts(d);                    // ‚ù§Ô∏è —Å–µ—Ä–¥–µ—á–∫–∏ –Ω–∞ –æ—Ç–∫—Ä—ã—Ç–∏–∏

        if (isAuthorMode) {
          openDay(i);                      // —Ä–µ–∂–∏–º –∞–≤—Ç–æ—Ä–∞
        } else {
          viewDay(i);                      // —Ä–µ–∂–∏–º –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
        }
      });
    }

    // –µ—Å–ª–∏ –µ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–∞—è –∑–∞–ø–∏—Å—å ‚Äî –ø–æ–¥—Å–≤–µ—Ç–∫–∞
    if (DIARY[i] && (DIARY[i].text || DIARY[i].image || DIARY[i].video || DIARY[i].music)) {
      d.classList.add("filled");
    }

    installSecretTouch(d, i);              // —Å–∫—Ä—ã—Ç—ã–π –∂–µ—Å—Ç –≤–∫–ª—é—á–µ–Ω–∏—è –∞–≤—Ç–æ—Ä—Å–∫–æ–≥–æ —Ä–µ–∂–∏–º–∞

    cal.appendChild(d);
  }
}

renderCalendar();

/* Close modal via ESC */
window.addEventListener('keydown',e=>{
  if(e.key==='Escape'){
    const r=document.getElementById('modal-root');
    if(r.style.display==='block'){
      r.style.display='none';
      r.innerHTML='';
    }
  }
});

// –ê–Ω–∏–º–∞—Ü–∏—è —Å–µ—Ä–¥–µ—á–∫–∞ –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –ª—é–±—É—é –∫–Ω–æ–ø–∫—É .btn
document.addEventListener("click", (e) => {
  const btn = e.target.closest(".btn");
  if (btn) {
      spawnButtonHeart(btn);
  }

});

</script>

</body>
</html>




